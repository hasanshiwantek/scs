<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>scs</title>
    <!-- Set App Bridge config from URL (shop/host) so the CDN script doesn't throw "missing required configuration fields: shop" -->
    <script>
      (function() {
        var params = new URLSearchParams(window.location.search);
        var shop = params.get('shop') || 'test-store.myshopify.com';
        var host = params.get('host') || '';
        var apiKey = 'a2afe2f64c425f93f052bfaece617ca5';
        // Redirect to OAuth in top window so Shopify login isn't loaded in iframe (X-Frame-Options: deny).
        if (params.get('shop') && params.get('host')) {
          var url = window.location.origin + '/api-proxy/auth/shopify?shop=' + encodeURIComponent(params.get('shop'));
          window.top.location.replace(url);
          return;
        }
        function setMeta(name, content) {
          var el = document.querySelector('meta[name="' + name + '"]');
          if (!el) { el = document.createElement('meta'); el.setAttribute('name', name); document.head.appendChild(el); }
          el.setAttribute('content', content);
        }
        setMeta('shopify-api-key', apiKey);
        setMeta('shopify-shop', shop);
        if (host) setMeta('shopify-host', host);
      })();
    </script>
    <script src="https://cdn.shopify.com/shopifycloud/app-bridge.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>